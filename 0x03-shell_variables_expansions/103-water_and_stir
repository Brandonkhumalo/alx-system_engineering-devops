#!/bin/bash

water_base="water"
stir_base="stir"
bestchol_base="bestchol"

# Function to convert custom base string to decimal
# Arguments: $1=number, $2=digits
to_decimal() {
  num=$1
  digits=$2
  base=${#digits}
  len=${#num}
  result=0

  for (( i=0; i<len; i++ )); do
    char=${num:i:1}
    # Find index of char in digits (this is the digit value)
    for ((j=0; j<base; j++)); do
      if [ "${digits:j:1}" = "$char" ]; then
        digit_val=$j
        break
      fi
    done
    # Multiply previous result by base and add digit value
    result=$(( result * base + digit_val ))
  done
  echo $result
}

# Function to convert decimal to custom base string
# Arguments: $1=decimal number, $2=digits
from_decimal() {
  num=$1
  digits=$2
  base=${#digits}
  if [ "$num" -eq 0 ]; then
    echo "${digits:0:1}"
    return
  fi

  res=""
  while [ "$num" -gt 0 ]; do
    rem=$(( num % base ))
    num=$(( num / base ))
    res="${digits:rem:1}$res"
  done
  echo "$res"
}

water_num=$(to_decimal "$WATER" "$water_base")
stir_num=$(to_decimal "$STIR" "$stir_base")
sum=$(( water_num + stir_num ))

from_decimal $sum "$bestchol_base"
