#!/usr/bin/env bash
# Script to audit DNS A records for specific subdomains

# Function to get DNS info
get_dns_info() {
    local domain=$1
    local sub=$2
    local full_domain="${sub}.${domain}"
    
    result=$(dig $full_domain +short)
    if [ -n "$result" ]; then
        record_type="A"
        destination=$(echo "$result" | awk 'NR==1')
        echo "The subdomain $sub is a $record_type record and points to $destination"
    fi
}

# Main execution
main() {
    domain=$1
    subdomain=$2

    if [ -z "$subdomain" ]; then
        for sub in www lb-01 web-01 web-02; do
            get_dns_info $domain $sub
        done
    else
        get_dns_info $domain $subdomain
    fi
}

main $@
